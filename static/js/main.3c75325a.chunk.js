(this["webpackJsonptask-app-fron"]=this["webpackJsonptask-app-fron"]||[]).push([[0],{11:function(e,a,t){e.exports=t(33)},16:function(e,a,t){},31:function(e,a,t){},33:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(7),o=t.n(s),i=(t(16),t(1)),l=t(2),c=t(4),m=t(3),u=function(e){var a=e.onRouteChange;return e.isLoggedIn?r.a.createElement("nav",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement("p",{className:"f3 link dim black underline pa3 pointer",onClick:function(){return a("signout")}},"Sign Out")):r.a.createElement("nav",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement("p",{className:"f3 link dim black underline pa3 pointer",onClick:function(){return a("signin")}},"Sign In"),r.a.createElement("p",{className:"f3 link dim black underline pa3 pointer",onClick:function(){return a("register")}},"Register"))},h=t(5),p=t.n(h),d=t(8),g=t(9),b=t.n(g),v=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).getUserAvatar=Object(d.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.user,e.prev=1,e.next=4,fetch("https://blech-task-manager.herokuapp.com/users/".concat(a._id,"/avatar"),{method:"get",headers:{Authorization:"Bearer ".concat(a.token)}}).then((function(e){200===e.status&&n.setState({avatar:!0})}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n.setState({avatar:!1});case 9:case"end":return e.stop()}}),e,null,[[1,6]])}))),n.onPhotoChangeClick=function(){var e=document.querySelector("#myfile").files[0],a=new FormData;a.append("avatar",e),fetch("https://blech-task-manager.herokuapp.com/users/me/avatar",{method:"post",body:a,headers:{Authorization:"Bearer ".concat(n.props.user.token)}}).then((function(e){200===e.status&&n.setState({avatar:!0})}))},n.onPhotoDeleteClick=function(){fetch("https://blech-task-manager.herokuapp.com/users/me/avatar",{method:"delete",headers:{Authorization:"Bearer ".concat(n.props.user.token)}}),n.setState({avatar:!1})},n.state={avatar:!1},n}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getUserAvatar()}},{key:"render",value:function(){var e=this.props.user;return r.a.createElement("div",null,this.state.avatar?r.a.createElement("img",{alt:"",src:"https://blech-task-manager.herokuapp.com/users/".concat(e._id,"/avatar"),width:"300px",height:"auto"}):r.a.createElement("img",{alt:"",src:b.a,width:"300px",height:"auto"}),r.a.createElement("br",null),r.a.createElement("form",{className:"f5 ph3 pv white",action:"/action_page.php"},r.a.createElement("input",{type:"file",id:"myfile",name:"myfile"}),r.a.createElement("br",null)),r.a.createElement("div",{className:"flex justify-center"},r.a.createElement("button",{className:"outline w-25 pa3 mr2 w-30 grow f4 link ph3 pv dib white bg-dark-blue",type:"submit",onClick:this.onPhotoChangeClick},"Change Photo"),r.a.createElement("button",{className:"outline w-25 pa3 mr2 w-30 grow f4 link ph3 pv dib white bg-light-red",type:"delete",onClick:this.onPhotoDeleteClick},"Delete Photo")))}}]),t}(r.a.Component),f=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).deleteUser=function(){console.log("Delete: Bearer is: ",n.props.user.token);var e=n.props,a=e.onRouteChange,t=(e.onPhotoChange,e.user);fetch("https://blech-task-manager.herokuapp.com/users/me/",{method:"delete",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(t.token)}}).then((function(e){return e.json()})).then((function(e){console.log(e),e._id&&a("signout")}))},n}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props,a=(e.onPhotoChange,e.user);return r.a.createElement("div",null,r.a.createElement("div",{className:"ma4 mt0"},r.a.createElement("h1",null,"".concat(a.name))),r.a.createElement("div",null,r.a.createElement("h2",null,"email: ".concat(a.email)),r.a.createElement("h2",null,"age: ".concat(a.age))),r.a.createElement(v,{user:a}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("button",{className:"w-30 grow f4 link ph3 pv dib white bg-light-purple",onClick:this.deleteUser},"Delete User")))}}]),t}(r.a.Component),k=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).onEmailChange=function(e){n.setState({emailSignIn:e.target.value})},n.onPasswordChange=function(e){n.setState({passwordSignIn:e.target.value})},n.onSubmitSignIn=function(){fetch("https://blech-task-manager.herokuapp.com/users/login",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({email:n.state.emailSignIn,password:n.state.passwordSignIn})}).then((function(e){return e.json()})).then((function(e){if(console.log("Login: ",e),e.user){var a=e.user,t=e.token;n.props.loadUser(a,t),n.props.onRouteChange("home")}}))},n.state={emailSignIn:"",passwordSignIn:""},n}return Object(l.a)(t,[{key:"render",value:function(){var e=this.props.onRouteChange;return r.a.createElement("article",{className:"br3 ba dark-gray b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("div",{className:"measure"},r.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f4 fw6 ph0 mh0"},"Sign In"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",onChange:this.onEmailChange})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:this.onPasswordChange}))),r.a.createElement("div",{className:""},r.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign in",onClick:this.onSubmitSignIn})),r.a.createElement("div",{className:"lh-copy mt3"},r.a.createElement("p",{onClick:function(){return e("register")},href:"#0",className:"f6 link dim black db pointer"},"Register")))))}}]),t}(r.a.Component),w=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).onNameChange=function(e){n.setState({name:e.target.value})},n.onEmailChange=function(e){n.setState({email:e.target.value})},n.onPasswordChange=function(e){n.setState({password:e.target.value})},n.onSubmitRegister=function(){fetch("https://blech-task-manager.herokuapp.com/users",{method:"post",headers:{"content-type":"application/json"},body:JSON.stringify({email:n.state.email,name:n.state.name,password:n.state.password})}).then((function(e){return e.json()})).then((function(e){if(e.user){var a=e.user,t=e.token;n.props.loadUser(a,t),console.log("Register: ",a,t),n.props.onRouteChange("home")}}))},n.state={email:"",password:"",name:""},n}return Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("article",{className:"br3 ba dark-gray b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center"},r.a.createElement("main",{className:"pa4 black-80"},r.a.createElement("div",{className:"measure"},r.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},r.a.createElement("legend",{className:"f4 fw6 ph0 mh0"},"Register"),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"name"},"Name"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-92",type:"name",name:"name",id:"name",onChange:this.onNameChange})),r.a.createElement("div",{className:"mt3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"email-address"},"Email"),r.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"email",name:"email-address",id:"email-address",onChange:this.onEmailChange})),r.a.createElement("div",{className:"mv3"},r.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),r.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:this.onPasswordChange}))),r.a.createElement("div",{className:""},r.a.createElement("input",{className:"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"register",onClick:this.onSubmitRegister})))))}}]),t}(r.a.Component),E=t(10),C=t.n(E),y=(t(31),t(32),{particles:{number:{value:55,density:{enable:!1}},size:{value:8,random:!0},move:{direction:"bottom",out_mode:"out"},line_linked:{enable:!1}},interactivity:{events:{onclick:{enable:!0,mode:"remove"}},modes:{remove:{particles_nb:2}}}}),N={isLoggedIn:!1,route:"signin",user:{id:"",name:"",email:"",age:"",avatar:!1,createdAt:"",token:""}},S=function(e){Object(c.a)(t,e);var a=Object(m.a)(t);function t(){var e;return Object(i.a)(this,t),(e=a.call(this)).onRouteChange=function(a){"home"===a?e.setState({isLoggedIn:!0}):"signout"===a&&e.setState(N),e.setState({route:a}),console.log("Change route to ",a)},e.loadUser=function(a,t){e.setState({user:{_id:a._id,name:a.name,email:a.email,createdAt:a.createdAt,age:a.age,imgURL:"",token:t}}),console.log("App: ",a,t)},e.state={isLoggedIn:!1,route:"signin",user:{_id:"",name:"",email:"",age:"",avatar:!1,createdAt:"",token:""}},e}return Object(l.a)(t,[{key:"render",value:function(){var e=this.state,a=e.isLoggedIn,t=e.route;return r.a.createElement("div",{className:"App"},r.a.createElement(C.a,{className:"particles",params:y}),r.a.createElement(u,{onRouteChange:this.onRouteChange,isLoggedIn:a}),"home"===t?r.a.createElement("div",null,r.a.createElement(f,{onRouteChange:this.onRouteChange,user:this.state.user})):"signin"===t?r.a.createElement("div",null,r.a.createElement(k,{onRouteChange:this.onRouteChange,loadUser:this.loadUser})):r.a.createElement("div",null,r.a.createElement(w,{onRouteChange:this.onRouteChange,loadUser:this.loadUser})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,a,t){e.exports=t.p+"static/media/anonymous.31cb6acd.png"}},[[11,1,2]]]);
//# sourceMappingURL=main.3c75325a.chunk.js.map